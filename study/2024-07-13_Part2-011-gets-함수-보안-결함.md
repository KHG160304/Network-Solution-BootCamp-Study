

# gets() 함수의 보안 결함

- gets 함수의 매개변수로 문자열 길이를 얼마나 입력 받을 수 있는지 크기를 확인하지 않아 발생한다.

- 메모리의 경계를 벗어난 쓰기가 수행될 수 있다.

- 메모리 오버플로우가 발생할 수 있다.

- 코드 수준에서의 대응이 중요하다.

  ```cpp
  int main(void)
  {
  	char szBuffer[8] = { 0 };
      gets(szBuffer);
      // 키보드 입력으로 8byte 넘는 길이의 문자열을 입력하는 경우
      // szBuffer 크기를 넘어서는 메모리에 over-write가 발생할 수 있다.
      // gets 함수는 입력받은 문자열 끝에 0을 붙여준다.
      puts(szBuffer);
      return 0;
  
      /*
          위의 코드에서 gets에서 메모리 over-write가 발생해도 일단은 
          모든 코드가 다 실행된 후에, main 종류 후, 메모리를 정리하면서
          문제가 있다고 에러가 뜬다.
          문제가 발생한 순간 프로그램이 바로 꺼지던지, 에러가 나는게 더 맞는 방법이다.
      */    
  }
  ```



# gets_s() 함수는 어떻게 해결했나?

- 매개변수에 추가로 호출자가 제공한 버퍼의 길이 정보를 같이 받는다.
- 내부적으로 사용자가 입력한 문자열 길이랑 버퍼의 길이 정보를 비교해서
  over-write가 발생하겠다 싶으면, 문자열 복사도 하지 않고 에러를 내면서 프로그램을 종료시켜 버린