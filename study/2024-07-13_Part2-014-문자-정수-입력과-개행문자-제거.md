# scanf에 대한 설명

- 예전에는 키보드 눌린 값을 2차원의 키보드의 행과 열을 차례로 스캔해서 값을 찾아와서
  이 함수의 이름도 scanf가 아닐까 추측

- scanf 입력 종료는 엔터 이다.

  ```cpp
  char ch = 0;
  // scanf_s함수는 키보드 입력 버퍼에서 값을 읽어와서, 메모리에 저장한다.
  // 저장할 메모리의 주소를 알려줘야 한다. 그리고 해당 메모리의 길이도 알려준다.
  scanf_s("%c", &ch, 1);
  ```

  ```cpp
  char szBuffer[4] = { 0 };
  scanf_s("%4c", szBuffer, _countof(szBuffer));
  // %c에 4가 있으면 문자 4개 입력한다는 의미이다.
  
  ```
  
- scanf는 입력 버퍼에서 문자를 읽다가, 공백문자 또는 \n(개행문자)를 만나면, 문자열의 끝으로 보고 함수를 종료한다.



# scanf를 사용하다 발생하는 문제

```cpp
char szName[32] = { 0 };
int nAge = 0;

printf("나이를 입력하세요. : ");
scanf_s("%d", &nAge);
//scanf_s("%d%*c", &nAge);

printf("이름을 입력하세요. : ");
getS_s(szName, sizeof(szName));
```

- 위의 시나리오에서 나이를 입력하면, 입력 버퍼에 이렇게 들어간다. ->|5|\n|  |  |  |
- 그리고 5는 꺼내와서 nAge에 들어가고, \n 문자(엔터)는 입력 버퍼에 남는다.
- gets_s 는 입력 버퍼가 비워져 있지 않으면 버퍼에서 바로 값을 읽어온다.
- gets_s 가 입력 버퍼에 남아있는 값을 읽게되고 읽은 값이 \n 이여서, 입력이 끝난 것으로 파악해서 바로 넘어가 버린다.
- 그래서 이름을 입력하지 못하는 사태가 발생한다.
- 해결 방법은 입력 버퍼를 비워주는 것 이다.

- %*c 는 문자를 하나 읽어서 버리라는 뜻이다.



# scanf 실험 결과

```cpp
char szBuffer[8] = { 0 };
scanf_s("%4c", szBuffer, sizeof(szBuffer));
```

- 위의 소스코드에서 형식문자 %4c는 문자 4개를 입력해라는 뜻이다.
- 입력값으로 abc 입력하고 엔터를 치면, szBuffer에는 = { 'a', 'b', 'c', '\n' } 이렇게 들어간다.
- |a|b|c|\n| -> 입력 버퍼에 들어간 값이 이렇게 들어가고, 이것을 전부 읽어드린 형태이다. 
- 입력 버퍼가 싹 비워진다.
- 엔터 값인 개행 문자까지 읽어 갔다.



```cpp
char szBuffer[8] = { 0 };
scanf_s("%s", szBuffer, sizeof(szBuffer));
```

- 형식 문자 %s를 사용한 경우
- abc 를 입력하고 엔터를 치면 |a|b|c|\n| 이렇게 입력 버퍼에 들어간다.
- scanf_s에서 입력 버퍼에 있는 값을 읽으면, szBuffer 에는 { 'a', 'b', 'c', null } 이렇게 들어간다.
- 그리고 입력 버퍼에는 |\n|  |  |   |  개행 문자가 남는다.



# scanf는 형식 문자마다 입력 버퍼의 동작이 다르다.

- %s 및 %d 형식 문자는 \n 및 공백 문자를 무시하는 것으로 파악된다.
- %c 형식 문자는 공백 문자와 \n 무시하지 않고 값을 읽어온다.
- 형식 문자에 따라서 입력 버퍼에 입력된 \n 및 공백 문자의 처리가 달라진다.